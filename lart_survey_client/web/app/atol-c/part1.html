{% extends 'base.html' %}
{% set eel_forms = true %}
{% block title %}LART Survey Client - AToL-RML - Language Questionnaire {% endblock %}
{% block headline %}Language Questionnaire{% endblock %}
{% block head_scripts %}
<script type="text/javascript">
    atolInstanceId = parseInt(lart.forms.searchParams.get('instance'));

    populateAtolItems = function (atolItems) {
        const element = document.getElementById('AtolRatingScales');
        for(key in atolItems) {
          //code = `Items: First ${atolItems[key][0]}, second ${atolItems[key][1]}.<br />`;

         let code = '<fieldset id="fieldsetEnglish' + key + '">' +
                    '<label class="row mb-0" for="ratingEnglish' + key + '">' +
                    '<div class="col text-start ps-5">' + atolItems[key][0] + '</div>' +
                    //next
                    '<div class="col text-end pe-5">' + atolItems[key][1] + '</div></label>' +
                    '<div class="row mb-5"><div class="col ps-4 pe-4"><input type="range" class="form-range" id="ratingEnglish' + key + '"/>' +
                    '<div class="form-check ps-5"><div class="invalid-feedback">Please move the slider to record your choice.</div></div></div></div></fieldset>';
            element.insertAdjacentHTML('beforeend', code);
        }
    }

    eel.atol_c_get_items()(populateAtolItems);
</script>
{% endblock %}
{% block head_styles %}{% endblock %}
{% block drawer_info %}{% endblock %}
{% block drawer_nav_options %}
    <li class="nav-item">
        <a class="nav-link" onClick="discard_attempt()"><i class="bi bi-x-circle"></i>  Discard attempt</a>
    </li>
    <li><hr class="nav-divider"></li>
{% endblock %}
{% block content %}
    <article class="container-fluid p-2">
        <div class="progress">
            <div class="progress-bar bg-info" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>
        </div>
        <div class="row m-2 text-center">
            <h2>AToL: Language Questionnaire (RML)</h2>
        </div>

        <form id="surveyAtolForm">

            <!-- Name language statement to agree with... -->
            <div class="row mt-5 mb-0">
                <div class="col">
                    <h4>The English language is...</h4>
                </div>
            </div>

            <!-- Instructions -->
            <div class="row mt-0 mb-0">
                <div class="col">
                    <p class="help-block p-2 text-muted"><i class="bi-info-circle text-info"></i> Please use the sliders to record your choices</p>
                </div>
            </div>

            <div id="AtolRatingScales">
                <!-- Placeholder where JavaScript will insert sliders -->
            </div>
        
            <!-- Form submission -->
            <div class="row text-end p-3">
                <div clas="col">
                    <button type="submit" class="btn btn-primary btn-lg btn-action shadow">Next</button>
                </div>
            </div>
        </form>
    </article>
{% endblock %}
{% block tail_scripts %}{% endblock %}
